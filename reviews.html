<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>甜心食譜庫 | 共享你的甜點時光</title>

  <!-- 樣式資源 -->
  <link rel="stylesheet" href="assets/vendors/themify-icons/css/themify-icons.css" />
  <link rel="stylesheet" href="assets/vendors/animate/animate.css" />
  <link rel="stylesheet" href="assets/css/foodhut.css" />

  <style>
    .review-card {
      background: #fff9f0;
      color: #333;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .review-card strong {
      font-weight: 600;
      font-size: 1.1rem;
      color: #d17a7a;
    }
  </style>
</head>

<body data-spy="scroll" data-target=".navbar" data-offset="40" id="home">

  <!-- Navbar -->
  <nav class="custom-navbar navbar navbar-expand-lg navbar-dark fixed-top" data-spy="affix" data-offset-top="10">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" href="index.html">首頁</a></li>
        <li class="nav-item"><a class="nav-link" href="index.html#about">關於我們</a></li>
        <li class="nav-item"><a class="nav-link" href="latest.html">最新食譜</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="recipeDropdown" data-toggle="dropdown">所有食譜</a>
          <div class="dropdown-menu" aria-labelledby="recipeDropdown">
            <a class="dropdown-item" href="all-recipes.html"><strong>全部食譜</strong></a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="bread.html">麵包</a>
            <a class="dropdown-item" href="cake.html">蛋糕</a>
            <a class="dropdown-item" href="cookie.html">餅乾</a>
            <a class="dropdown-item" href="pudding.html">其他</a>
          </div>
        </li>
      </ul>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item"><a class="nav-link" href="reviews.html">食譜心得</a></li>
        <li class="nav-item"><a class="nav-link" href="dessert-cafes.html">甜點 / 咖啡廳</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">聯絡我們</a></li>
        <li class="nav-item">
          <form class="form-inline ml-3">
            <input class="form-control form-control-sm" type="search" placeholder="搜尋食譜" aria-label="Search">
          </form>
        </li>
      </ul>
    </div>
  </nav>

  <!-- 食譜心得區 -->
  <section class="container text-light pt-5" style="padding-top:100px;">
    <h2 class="text-center mb-5">食譜心得</h2>

    <!-- 留言表單 -->
    <div class="row justify-content-center">
      <div class="col-md-6">
        <form id="reviewForm">
          <div class="form-group">
            <input type="text" id="name" class="form-control" placeholder="你的名字" required />
          </div>
          <div class="form-group">
            <textarea id="message" class="form-control" rows="4" placeholder="你的留言..." required></textarea>
          </div>
          <button type="submit" class="btn btn-primary">送出留言</button>
        </form>
      </div>
    </div>

    <!-- 留言顯示區 -->
    <div class="mt-5 pt-4 border-top col-md-8 mx-auto">
      <h4 class="text-white mb-4">🍰 大家的甜點心得</h4>
      <div id="reviewsContainer" class="text-white"></div>
    </div>
  </section>

  <!-- Footer -->
  <footer id="contact" class="container-fluid bg-dark text-light has-height-md middle-items border-top text-center wow fadeIn">
    <div class="py-5">
      <h3 class="mb-4">聯絡我們</h3>
      <p class="text-muted">有任何建議、合作邀約或投稿需求歡迎來信 ✉</p>
      <div class="row justify-content-center text-center">
        <div class="col-sm-4">
          <h5 class="text-white">EMAIL</h5>
          <p class="text-muted">hello@dessertlab.com</p>
        </div>
        <div class="col-sm-4">
          <h5 class="text-white">IG / FB</h5>
          <p class="text-muted">@sweetrecipehub</p>
        </div>
        <div class="col-sm-4">
          <h5 class="text-white">分享甜點</h5>
          <p class="text-muted">#甜心食譜庫</p>
        </div>
      </div>
    </div>
    <p class="mb-0 py-3 text-muted small">&copy; <script>document.write(new Date().getFullYear())</script> 甜心食譜庫｜由你我共同烘焙的甜蜜時光</p>
  </footer>

  <!-- JS 套件 -->
  <script src="assets/vendors/jquery/jquery-3.4.1.js"></script>
  <script src="assets/vendors/bootstrap/bootstrap.bundle.js"></script>
  <script src="assets/vendors/bootstrap/bootstrap.affix.js"></script>
  <script src="assets/vendors/wow/wow.js"></script>
  <script src="assets/js/foodhut.js"></script>

  <!-- Firebase JS -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>

  <!-- Firebase 初始化與留言邏輯 -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCiv_J2q60ypimQvSlCH9tkvjb3hWGK3Jk",
      authDomain: "jung-c535f.firebaseapp.com",
      projectId: "jung-c535f",
      storageBucket: "jung-c535f.appspot.com",
      messagingSenderId: "842181479540",
      appId: "1:842181479540:web:a2bc3a42bb2d31cb80d521",
      measurementId: "G-21MT0LVWH3"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById("reviewForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const message = document.getElementById("message").value.trim();
      if (name && message) {
        db.collection("reviews").add({
          name: name,
          message: message,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        }).then(() => {
          document.getElementById("reviewForm").reset();
          loadReviews();
        });
      }
    });

    function loadReviews() {
      const container = document.getElementById("reviewsContainer");
      container.innerHTML = "";
      db.collection("reviews").orderBy("createdAt", "desc").get().then(snapshot => {
        snapshot.forEach(doc => {
          const data = doc.data();
          const div = document.createElement("div");
          div.className = "review-card";
          div.innerHTML = `<strong>${data.name}</strong><p>${data.message}</p>`;
          container.appendChild(div);
        });
      });
    }

    window.onload = loadReviews;
  </script>

</body>
</html>

